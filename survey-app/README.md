# Audio-Sentence Matching Survey (Static Web App)

This is a self-contained web app for evaluators to listen to audio (`.wav`) and judge if a provided sentence (`.lab`) matches. It is designed for static hosting (e.g., GitHub Pages) with no authentication and automatic CSV export upon completion.

## Features
- Automatic discovery of `.wav`/`.lab` pairs via a build script
- Randomized order per participant (seeded by anonymous ID)
- Progress auto-saves locally and resumes on return
- Mobile-friendly, responsive UI
- On-demand audio loading (no preloading of all files)
- Automatic CSV download on completion with participant ID in filename

## Project Structure
```
survey-app/
├─ index.html
├─ styles.css
├─ app.js
├─ scripts/
│  └─ build-manifest.js
└─ data/
   └─ alpha_data/
      ├─ manifest.json        <- generated by script
      ├─ yourfile1.wav
      ├─ yourfile1.lab
      └─ ... ~123 pairs
```

## Add Your Data
1. Place all `.wav` and corresponding `.lab` files (same basename) into `data/alpha_data/`.
2. Run the manifest build script locally:

```bash
node scripts/build-manifest.js
```

This creates `data/alpha_data/manifest.json` containing the list of tasks and the sentence text for each label.

Optionally, to build a different folder:

```bash
node scripts/build-manifest.js data/my_folder
```

## Local Preview
Use any static server (Python, Node, etc.):

```bash
# Python 3
python3 -m http.server -d . 8080
# Then open http://localhost:8080/survey-app/
```

or

```bash
# Node (if you have npx and serve installed)
npx serve -l 8080 .
```

## Deploy to GitHub Pages
- Commit this folder to a repository and enable GitHub Pages (deploy from `main` branch or `/docs` depending on your preference).
- Ensure `data/alpha_data/manifest.json` is present in the deployed branch. Re-run the build script whenever you update data.

## CSV Output Format
Columns:
- `participant_id`
- `timestamp_iso`
- `index` (0-based in the participant's randomized order)
- `audio_filename`
- `audio_path`
- `sentence`
- `response` (Yes | No | Not Sure)

The file will download automatically on completion and is named like `results_<participantId>.csv`.

## Resetting Progress
Click the Reset link in the UI to clear this device's saved state and restart.